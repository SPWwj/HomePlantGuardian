<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>My console</title>

    <script src="http://d3js.org/d3.v3.min.js" language="JavaScript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="liquidFillGauge.js" language="JavaScript"></script>
    <link href="myCssSheet.css" rel="stylesheet" type="text/css">
</head>
<body>

  <header>
      <div class="container">
        <h1 class="logo"></h1>
        <nav>
          <ul>
            <li><a href="AWSDATA.html">Home</a></li>
            <li><a href="WebAPI .html">Map</a></li>
            <li><a href="#">About</a></li>
          </ul>
        </nav>
      </div>
  </header>

  <div id="dataGauge" width="100%"><h1>Data Gauge<h1></div>

  <!-- <svg id="fillgauge1" width="97%" height="250" onclick="gauge1.update(NewValue());"></svg> -->
  <script language="JavaScript">

      var inter = setInterval(function() {
        var url = "data.json";
        $.getJSON(url, function (data) {
            loadedData = data;
          });
          if (loadedData!=null){
            gauge1.update(parseFloat((loadedData["ID0"][3]*100).toFixed(1)));
            gauge2.update(parseFloat((loadedData["ID0"][3]*100).toFixed(1)));
            gauge3.update(parseFloat((loadedData["ID0"][3]*100).toFixed(1)));
          }

        }, 200);


        reWidth=window.innerWidth;
        var devicesContainer = d3.select("body").append("svg")
                                            .classed("svg-container", true) //container class to make it responsive
                                            .attr("id","WaterLevel")
                                            .attr("width","33%")
                                            .attr("height",250)
                                            .attr("viewBox", "0 0 "+ reWidth/3+" 300");
        var devicesContainer1 = d3.select("body").append("svg")
                                            .classed("svg-container", true) //container class to make it responsive
                                            .attr("id","SoilMoisture")
                                            .attr("width","33%")
                                            .attr("height",250)
                                            .attr("viewBox", "0 0 "+ reWidth/3+" 300");
        var devicesContainer2 = d3.select("body").append("svg")
                                            .classed("svg-container", true) //container class to make it responsive
                                            .attr("id","RainSensor")
                                            .attr("width","33%")
                                            .attr("height",250)
                                            .attr("viewBox", "0 0 "+ reWidth/3+" 300");



        var config1 = liquidFillGaugeDefaultSettings();//create a config for gauge1
        config1.textVertPosition = 0.2;
        config1.waveAnimateTime = 1000;
        config1.circleColor = "black";
        var config2 = liquidFillGaugeDefaultSettings();//create a config for gauge1
        config2.textVertPosition = 0.2;
        config2.waveAnimateTime = 1000;
        config2.textColor = "#553300";
        config2.waveTextColor = "#805615";
        config2.waveColor = "#AA7D39";
        var config3 = liquidFillGaugeDefaultSettings();//create a config for gauge1
        config3.textVertPosition = 0.2;
        config3.waveAnimateTime = 1000;
        config3.textColor = "#FF4444";
        config3.waveTextColor = "#FFAAAA";
        config3.waveColor = "#FFDDDD";
        var gauge1 = loadLiquidFillGauge("WaterLevel", loadedData,config1);//call loadLiquidFillGauge
        var gauge2 = loadLiquidFillGauge("SoilMoisture", loadedData,config2);//call loadLiquidFillGauge
        var gauge3 = loadLiquidFillGauge("RainSensor",loadedData,config3);//call loadLiquidFillGauge
    </script>
</body>
</html>
